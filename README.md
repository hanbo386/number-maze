# 数字迷阵 - Number Matrix Game

一个基于 Phaser 3 开发的数字迷阵游戏，玩家需要通过连接相邻的数字方块，使它们的总和等于目标数字。

npx --yes http-server -p 8000

## 项目结构

项目采用模块化架构，遵循 Phaser 3 最佳实践：

```
number-maze/
├── index.html              # 主HTML文件
├── number-maze.html        # 原始单文件版本（保留）
├── js/
│   ├── config/
│   │   └── GameConfig.js   # 游戏配置常量
│   ├── scenes/
│   │   └── MainScene.js    # 主游戏场景
│   ├── objects/
│   │   └── Tile.js         # Tile游戏对象类
│   └── utils/
│       ├── ColorUtils.js   # 颜色工具函数
│       └── GridUtils.js   # 网格工具函数
└── README.md
```

## 架构说明

### 配置层 (config/)
- **GameConfig.js**: 集中管理所有游戏配置参数，包括：
  - 网格配置（大小、间距等）
  - 颜色配置
  - 游戏规则配置
  - 动画配置
  - UI配置

### 场景层 (scenes/)
- **MainScene.js**: 主游戏场景，负责：
  - 游戏状态管理
  - UI创建和更新
  - 游戏逻辑处理
  - 事件处理

### 对象层 (objects/)
- **Tile.js**: Tile游戏对象类，封装了：
  - Tile的创建和渲染
  - 动画播放（生成、选中、下落等）
  - 交互事件绑定

### 工具层 (utils/)
- **ColorUtils.js**: 颜色相关工具函数
- **GridUtils.js**: 网格计算和判断工具函数

## 重构改进

### 1. 模块化设计
- 将单文件代码拆分为多个模块
- 每个模块职责单一，便于维护和测试
- 使用 ES6 模块系统

### 2. 配置集中管理
- 所有配置参数集中在 `GameConfig.js`
- 便于调整游戏参数
- 支持计算属性（getter）

### 3. 对象封装
- Tile 对象封装了所有相关逻辑
- 动画方法统一管理
- 提高代码复用性

### 4. 工具函数分离
- 纯函数工具类，便于测试
- 可复用的计算逻辑

### 5. 代码组织
- 清晰的目录结构
- 统一的命名规范
- 完善的注释文档

## 运行方式

1. 使用支持 ES6 模块的本地服务器运行（不能直接打开 HTML 文件）
2. 推荐使用 Python 简单服务器：
   ```powershell
   python -m http.server 8000
   ```
   或使用 Node.js 的 http-server：
   ```powershell
   npx http-server
   ```
3. 在浏览器中访问 `http://localhost:8000`

## 技术栈

- **Phaser 3.60.0**: 游戏引擎
- **ES6 Modules**: 模块系统
- **纯 JavaScript**: 无框架依赖

## 游戏玩法

1. 游戏会显示一个目标数字
2. 通过拖拽连接相邻的数字方块
3. 当选中方块的总和等于目标数字时，获得分数
4. 匹配成功后，方块会消失并产生粒子效果
5. 新的方块会从上方落下填充空位
6. 如果总和超过目标数字，会扣除分数

## 最佳实践

本项目遵循以下 Phaser 3 最佳实践：

1. ✅ **模块化架构**: 代码按功能模块组织
2. ✅ **配置分离**: 配置与逻辑分离
3. ✅ **对象封装**: 游戏对象封装相关逻辑
4. ✅ **工具函数**: 纯函数工具类
5. ✅ **代码注释**: 完善的 JSDoc 注释
6. ✅ **命名规范**: 清晰的命名约定
7. ✅ **职责单一**: 每个类/函数职责明确

